document.addEventListener("DOMContentLoaded", () => {
    const e = document.querySelector(".menu-toggle")
      , t = document.querySelector(".main-nav");
    if (e && t) {
        e.addEventListener("click", () => {
            const a = "true" === e.getAttribute("aria-expanded");
            e.setAttribute("aria-expanded", !a),
            e.classList.toggle("active"),
            t.classList.toggle("open")
        }
        ),
        document.addEventListener("keydown", a => {
            "Escape" === a.key && t.classList.contains("open") && (t.classList.remove("open"),
            e.setAttribute("aria-expanded", "false"),
            e.focus())
        }
        )
    }
    const a = document.querySelectorAll(".has-submenu");
    a.length && a.forEach(e => {
        const t = e.querySelector("a")
          , a = e.querySelector(".submenu");
        if (!t)
            return;
        t.setAttribute("aria-haspopup", "true"),
        t.setAttribute("aria-expanded", "false"),
        a && a.setAttribute("aria-hidden", "true"),
        t.addEventListener("click", r => {
            r.preventDefault();
            const n = e.classList.contains("active");
            e.classList.toggle("active", !n),
            t.setAttribute("aria-expanded", !n),
            a && a.setAttribute("aria-hidden", n)
        }
        ),
        t.addEventListener("keydown", r => {
            "Escape" === r.key && e.classList.contains("active") && (e.classList.remove("active"),
            t.setAttribute("aria-expanded", "false"),
            a && a.setAttribute("aria-hidden", "true"),
            t.focus())
        }
        )
    }
    );
    const r = document.querySelector(".projects-grid")
      , n = document.querySelector("#project-card-template");
    if (r && n) {
        [{
            titulo: "Educação para Todos",
            descricao: "Oferecemos reforço escolar e cursos de capacitação gratuitos para jovens em vulnerabilidade.",
            imagem: "assets/images/projeto_educacao.png"
        }, {
            titulo: "Saúde em Movimento",
            descricao: "Ações itinerantes de saúde básica e prevenção em comunidades afastadas.",
            imagem: "assets/images/projeto_saude.png"
        }, {
            titulo: "Acolhimento Animal",
            descricao: "Resgate e cuidados veterinários para animais abandonados até sua adoção.",
            imagem: "assets/images/hero_missao.png"
        }, {
            titulo: "Inclusão Social",
            descricao: "Inclusão social é garantir que todos tenham voz, oportunidades e participação plena na sociedade.",
            imagem: "assets/images/missao_banner_v14.png"
        }, {
            titulo: "Meio Ambiente Sustentável",
            descricao: "Desfrutar hoje para recolher a amanhã.",
            imagem: "assets/images/sede_img.png"
        }, {
            titulo: "Centro Cultural Comunitário",
            descricao: "Centros de ensino, com aulas de dança, capoeira, artes e muito mais.",
            imagem: "assets/images/projeto_educacao_v15.png"
        }].forEach(e => {
            const t = n.content.cloneNode(!0);
            t.querySelector(".project-img").src = e.imagem,
            t.querySelector(".project-img").alt = e.titulo,
            t.querySelector(".project-title").textContent = e.titulo,
            t.querySelector(".project-desc").textContent = e.descricao,
            r.appendChild(t)
        }
        )
    }
    const o = document.getElementById("cadastroForm");
    o && o.addEventListener("submit", e => {
        function t(e, t) {
            const a = document.createElement("div");
            a.className = "error-message",
            a.style.color = "red",
            a.style.fontSize = "0.9em",
            a.textContent = t,
            e.insertAdjacentElement("afterend", a)
        }
        e.preventDefault();
        let a = !0;
        o.querySelectorAll(".error-message").forEach(e => e.remove());
        const r = o.nome;
        r.value.trim().length < 3 && (t(r, "O nome deve ter pelo menos 3 caracteres."),
        a = !1);
        const n = o.email;
        n.value.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/) || (t(n, "Digite um e-mail válido."),
        a = !1);
        const c = o.cpf;
        c.value.match(/^\d{3}\.\d{3}\.\d{3}-\d{2}$/) || (t(c, "Digite um CPF válido no formato 000.000.000-00."),
        a = !1);
        const i = o.telefone;
        i.value.match(/^\(\d{2}\)\s?\d{4,5}-\d{4}$/) || (t(i, "Digite um telefone válido, ex: (11) 90000-0000."),
        a = !1);
        const s = o.nascimento;
        s.value || (t(s, "Informe sua data de nascimento."),
        a = !1);
        const d = o.cep;
        d.value.match(/^\d{5}-\d{3}$/) || (t(d, "Digite um CEP válido, ex: 12345-678."),
        a = !1),
        o.endereco.value.trim() || (t(o.endereco, "Informe seu endereço."),
        a = !1),
        o.cidade.value.trim() || (t(o.cidade, "Informe sua cidade."),
        a = !1),
        o.estado.value || (t(o.estado, "Selecione um estado."),
        a = !1),
        o.tipo.value || (t(o.tipo, "Selecione uma opção."),
        a = !1),
        o.genero.value || (t(o.genero, "Selecione uma opção."),
        a = !1),
        a && (alert("Cadastro enviado com sucesso!"),
        o.reset())
    }
    )
}
);
